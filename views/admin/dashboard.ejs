<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Afacad:ital,wght@0,400..700;1,400..700&family=Anek+Latin:wght@100..800&family=Manrope:wght@200..800&family=Michroma&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/styles/admin/dashboard.css">
</head>
<body>
  <div class="background">
  <div class="container">
    <h1>Admin Dashboard</h1>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="agencyTabs" role="tablist">
      <li class="nav-item">
        <button
          class="nav-link active"
          id="certified-tab"
          data-bs-toggle="tab"
          data-bs-target="#certified"
          type="button"
          role="tab"
        >
          Certified Agencies
        </button>
      </li>
      <li class="nav-item">
        <button
          class="nav-link"
          id="uncertified-tab"
          data-bs-toggle="tab"
          data-bs-target="#uncertified"
          type="button"
          role="tab"
        >
          Uncertified Agencies
        </button>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="agencyTabsContent">
      <!-- Certified Agencies -->
      <div class="tab-pane fade show active" id="certified" role="tabpanel">
        <div class="row">
          <% certifiedAgencies.forEach(agency => { %>
          <div class="col">
            <div class="card">
              <div class="card-body">
                <div class="d-flex align-items-center mb-4">
                  <% console.log(agency.logo.url); %>
                  <img src="<%= agency.logo.url %>" alt="Logo" class="logo-img me-3">
                  <h5><%= agency.name %></h5>
                </div>
                <p><strong>Email:</strong> <%= agency.email %></p>
                <p><strong>Phone:</strong> <%= agency.phone %></p>
                <p><strong>Contact Person:</strong> <%= agency.contactPerson || 'N/A' %></p>
                <p><strong>Region:</strong> <%= agency.region || 'N/A' %></p>
                <p><strong>Agency Type:</strong> <%= agency.agencyType.join(', ') %></p>
                <p><strong>Waste Types Handled:</strong> <%= agency.wasteTypesHandled.join(', ') %></p>
                <p><strong>Working Hours:</strong> <%= agency.workingHours || 'N/A' %></p>
                <p><strong>Certification Status:</strong> <span class="badge bg-success">Certified</span></p>
                <p><strong>Inventory Setup:</strong> <%= agency.isInventorySetup ? 'Yes' : 'No' %></p>
                <p><strong>Address:</strong> <%= agency.address || 'N/A' %></p>

                <!-- Document Buttons -->
                <div class="mt-3">
                  <a href="<%= agency.documents.tradeLicense.url %>" target="_blank" class="btn btn-primary">
                    View Trade License
                  </a>
                  <a href="<%= agency.documents.pcbAuth.url %>" target="_blank" class="btn btn-secondary">
                    View PCB Authorization
                  </a>
                </div>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>

      <!-- Uncertified Agencies -->
      <div class="tab-pane fade" id="uncertified" role="tabpanel">
        <div class="row">
          <% uncertifiedAgencies.forEach(agency => { %>
          <div class="col">
            <div class="card">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <img src="<%= agency.logo.url %>" alt="Logo" class="logo-img me-3">
                  <h5><%= agency.name %></h5>
                </div>
                <p><strong>Email:</strong> <%= agency.email %></p>
                <p><strong>Phone:</strong> <%= agency.phone %></p>
                <p><strong>Contact Person:</strong> <%= agency.contactPerson || 'N/A' %></p>
                <p><strong>Region:</strong> <%= agency.region || 'N/A' %></p>
                <p><strong>Agency Type:</strong> <%= agency.agencyType.join(', ') %></p>
                <p><strong>Waste Types Handled:</strong> <%= agency.wasteTypesHandled.join(', ') %></p>
                <p><strong>Working Hours:</strong> <%= agency.workingHours || 'N/A' %></p>
                <p><strong>Certification Status:</strong> <span class="badge bg-danger">Uncertified</span></p>
                <p><strong>Inventory Setup:</strong> <%= agency.isInventorySetup ? 'Yes' : 'No' %></p>
                <p><strong>Address:</strong> <%= agency.address || 'N/A' %></p>

                <!-- Document Buttons -->
                <div class="mt-3">
                  <a href="<%= agency.documents.tradeLicense.url %>" target="_blank" class="btn btn-primary">
                    View Trade License
                  </a>
                  <a href="<%= agency.documents.pcbAuth.url %>" target="_blank" class="btn btn-secondary">
                    View PCB Authorization
                  </a>
                  <form action="/agency/<%= id %>/approve/<%= agency._id %>" method="POST" class="d-inline mt-2">
                    <button type="submit" class="btn btn-success">Certify Agency</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
</body>
</html>
