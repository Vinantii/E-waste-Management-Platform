<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agency Signup Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <h2 class="text-center mb-4">Agency Registration</h2>

          <form
            action="/register/agency"
            method="POST"
            class="needs-validation"
            enctype="multipart/form-data"
            novalidate
          >
            <!-- Agency Logo -->
            <div class="mb-3">
              <label for="agencyLogo" class="form-label">Agency Logo</label>
              <input
                type="file"
                class="form-control"
                id="agencyLogo"
                name="agencyLogo"
                accept="image/*"
                required
              />
              <div class="invalid-feedback">Please upload your agency logo</div>
            </div>

            <!-- Name -->
            <div class="mb-3">
              <label for="agency[name]" class="form-label">Agency Name</label>
              <input
                type="text"
                class="form-control"
                id="agency[name]"
                name="agency[name]"
                required
              />
              <div class="invalid-feedback">
                Please provide your agency name
              </div>
            </div>


            <!-- Email -->
            <div class="col-md-6">
              <label for="email" class="form-label">Email:</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="agency[email]"
                required
              />
              <div class="invalid-feedback">Please provide a valid email.</div>
            </div>

            <!-- Password -->
            <div class="col-md-6">
              <label for="password" class="form-label">Password:</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="agency[password]"
                required
              />
              <div class="invalid-feedback">Please provide a password.</div>
            </div>

            <!-- Agency Type -->
            <div class="col-md-6">
              <label for="agencyType" class="form-label">Agency Type:</label>
              <select
                class="form-select"
                id="agencyType"
                name="agency[agencyType]"
                multiple
                required
              >
                <option value="Recycler">Recycler</option>
                <option value="Collector">Collector</option>
                <option value="Disposal">Disposal</option>
                <option value="Aggregator">Aggregator</option>
              </select>
              <div class="invalid-feedback">
                Please select at least one agency type.
              </div>
            </div>

            <!-- Address -->
            <div class="col-12">
              <label for="address" class="form-label">Address:</label>
              <textarea
                class="form-control"
                id="address"
                name="agency[address]"
                required
              ></textarea>
              <div class="invalid-feedback">Please provide an address.</div>
            </div>

            <!-- Region -->
            <div class="col-md-6">
              <label for="region" class="form-label">Region:</label>
              <input
                type="text"
                class="form-control"
                id="region"
                name="agency[region]"
                required
              />
              <div class="invalid-feedback">Please provide a region.</div>
            </div>

            <!-- Phone -->
            <div class="col-md-6">
              <label for="phone" class="form-label">Phone:</label>
              <input
                type="tel"
                class="form-control"
                id="phone"
                name="agency[phone]"
                required
              />
              <div class="invalid-feedback">Please provide a phone number.</div>
            </div>

            <!-- Contact Person -->
            <div class="col-md-6">
              <label for="contactPerson" class="form-label"
                >Contact Person:</label
              >
              <input
                type="text"
                class="form-control"
                id="contactPerson"
                name="agency[contactPerson]"
                required
              />
              <div class="invalid-feedback">
                Please provide a contact person.
              </div>
            </div>

            <!-- Agency Description -->
            <div class="col-md-6">
              <label for="description" class="form-label"
                >Description:</label
              >
              <textarea
                class="form-control"
                id="description"
                name="agency[description]"
                required
              ></textarea>
              <div class="invalid-feedback">
                Please provide a description.
              </div>
            </div>


            <!-- Location Type -->
            <div class="col-md-6">
              <label for="locationType" class="form-label"
                >Location Type:</label
              >
              <input
                type="text"
                class="form-control"
                id="locationType"
                name="agency[location][type]"
                value="Point"
              />
            </div>

            <!-- Coordinates -->
            <div class="form-group">
              <label for="longitude">Longitude:</label>
              <input
                type="number"
                step="any"
                class="form-control"
                id="longitude"
                name="agency[location][coordinates][]"
                required
              />
            </div>

            <div class="form-group">
              <label for="latitude">Latitude:</label>
              <input
                type="number"
                step="any"
                class="form-control"
                id="latitude"
                name="agency[location][coordinates][]"
                required
              />
            </div>

            <!-- Working Hours -->
            <div class="col-md-6">
              <label for="workingHours" class="form-label"
                >Working Hours:</label
              >
              <input
                type="text"
                class="form-control"
                id="workingHours"
                name="agency[workingHours]"
                required
              />
              <div class="invalid-feedback">Please provide working hours.</div>
            </div>

            <!-- Waste Types Handled -->
            <div class="col-12">
              <label for="wasteTypesHandled" class="form-label"
                >Waste Types Handled:</label
              >
              <select
                class="form-select"
                id="wasteTypesHandled"
                name="agency[wasteTypesHandled]"
                multiple
                required
              >
                <option value="mobile">Mobile</option>
                <option value="laptop">Laptop</option>
                <option value="computers">Computer</option>
                <option value="Batteries">Batteries</option>
                <option value="phones">Phones</option>
              </select>
              <div class="invalid-feedback">
                Please select at least one waste type.
              </div>
            </div>

            <!-- Trade License (PDF) -->
            <div class="mb-3">
              <label for="tradeLicense" class="form-label">Trade License (PDF)</label>
              <input
                type="file"
                class="form-control"
                id="tradeLicense"
                name="tradeLicense"
                accept="application/pdf"
                required
              />
              <div class="invalid-feedback">Please upload the trade license PDF.</div>
            </div>

            <!-- PCB Authorization (PDF) -->
            <div class="mb-3">
              <label for="pcbAuth" class="form-label">PCB Authorization (PDF)</label>
              <input
                type="file"
                class="form-control"
                id="pcbAuth"
                name="pcbAuth"
                accept="application/pdf"
                required
              />
              <div class="invalid-feedback">Please upload the PCB authorization PDF.</div>
            </div>

            <!-- Submit Button -->
            <div class="col-12 mt-4">
              <button type="submit" class="btn btn-primary w-100">
                Register Agency
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- Custom validation script -->
    <script src="/js/script.js"></script>

    <script>
      document.querySelector("form").addEventListener("submit", function (e) {
        const longitude = parseFloat(
          document.getElementById("longitude").value
        );
        const latitude = parseFloat(document.getElementById("latitude").value);

        // Basic coordinate validation
        if (isNaN(longitude) || longitude < -180 || longitude > 180) {
          e.preventDefault();
          alert("Invalid longitude. Must be between -180 and 180.");
          return;
        }

        if (isNaN(latitude) || latitude < -90 || latitude > 90) {
          e.preventDefault();
          alert("Invalid latitude. Must be between -90 and 90.");
          return;
        }
      });
    </script>
  </body>
</html>
